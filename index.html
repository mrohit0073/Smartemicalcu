<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Advanced EMI Calculator with Prepayment</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="calculator-container">
        <h1>Advanced EMI Calculator</h1>

        <div class="input-section">
            <div class="input-group">
                <label for="loanAmount">Loan Amount (₹):</label>
                <input type="number" id="loanAmount" placeholder="e.g., 1000000" value="1000000">
            </div>

            <div class="input-group">
                <label for="interestRate">Annual Interest Rate (%):</label>
                <input type="number" id="interestRate" placeholder="e.g., 8.5" value="8.5">
            </div>

            <div class="input-group">
                <label for="loanTenure">Loan Tenure (Years):</label>
                <input type="number" id="loanTenure" placeholder="e.g., 10" value="10">
            </div>
        </div>

        <div class="prepayment-section">
            <h2>Prepayment Options</h2>
            <div class="input-group">
                <label>Prepayment Type:</label>
                <div class="radio-group">
                    <input type="radio" id="prepayNone" name="prepaymentType" value="none" checked>
                    <label for="prepayNone">None</label>
                    <input type="radio" id="prepayOneTime" name="prepaymentType" value="oneTime">
                    <label for="prepayOneTime">One-Time</label>
                    <input type="radio" id="prepayRecurring" name="prepaymentType" value="recurring">
                    <label for="prepayRecurring">Recurring</label>
                </div>
            </div>

            <div id="oneTimePrepaymentFields" class="prepayment-fields" style="display: none;">
                <div class="input-group">
                    <label for="oneTimeAmount">One-Time Prepayment Amount (₹):</label>
                    <input type="number" id="oneTimeAmount" placeholder="e.g., 50000">
                </div>
                <div class="input-group">
                    <label for="oneTimeMonth">Prepay After Month #:</label>
                    <input type="number" id="oneTimeMonth" placeholder="e.g., 12 (after 1st year)">
                </div>
            </div>

            <div id="recurringPrepaymentFields" class="prepayment-fields" style="display: none;">
                <div class="input-group">
                    <label for="recurringAmount">Recurring Prepayment Amount (₹):</label>
                    <input type="number" id="recurringAmount" placeholder="e.g., 20000">
                </div>
                <div class="input-group">
                    <label for="recurringFrequency">Frequency:</label>
                    <select id="recurringFrequency">
                        <option value="12">Annually (after every 12th EMI)</option>
                        <option value="6">Semi-Annually (after every 6th EMI)</option>
                        <option value="3">Quarterly (after every 3rd EMI)</option>
                        <option value="1">Monthly (with every EMI)</option>
                    </select>
                </div>
                 <div class="input-group">
                    <label for="recurringStartMonth">Start Recurring Prepayment After Month #:</label>
                    <input type="number" id="recurringStartMonth" placeholder="e.g., 0 or 12" value="0">
                     <small>Enter 0 to start from the first possible instance of chosen frequency.</small>
                </div>
            </div>
        </div>

        <button id="calculateBtn">Calculate</button>

        <div id="error" class="error-message" style="display: none;"></div>

        <div id="summaryResults" class="results-container" style="display: none;">
            <h2>Loan Summary:</h2>
            <div class="summary-grid">
                <div><p>Original Monthly EMI:</p><strong id="monthlyEMI" class="result-value"></strong></div>
                <div><p>Original Total Interest:</p><strong id="originalTotalInterest" class="result-value"></strong></div>
                <div><p>Original Total Payment:</p><strong id="originalTotalPayment" class="result-value"></strong></div>
            </div>
            <div id="prepaymentSummary" style="display:none;">
                <hr class="summary-hr">
                <h3>With Prepayment:</h3>
                <div class="summary-grid">
                    <div><p>New Loan Tenure:</p><strong id="newTenure" class="result-value"></strong></div>
                    <div><p>Total Interest Paid:</p><strong id="newTotalInterest" class="result-value"></strong></div>
                    <div><p>Total Amount Paid:</p><strong id="newTotalPayment" class="result-value"></strong></div>
                    <div><p>Interest Saved:</p><strong id="interestSaved" class="result-value highlight-saved"></strong></div>
                    <div><p>Money Saved (Interest - Prepayments):</p><strong id="moneySaved" class="result-value highlight-saved"></strong></div>
                     <div><p>Total Prepayments Made:</p><strong id="totalPrepaymentsMade" class="result-value"></strong></div>
                </div>
            </div>
        </div>


        <div id="amortizationSection" style="display: none;">
            <h2>Amortization Schedule:</h2>
            <p id="amortizationNote" style="font-style:italic; font-size:0.9em; margin-bottom:10px;"></p>
            <div class="table-container">
                <table>
                    <thead>
                        <tr>
                            <th>Month</th>
                            <th>Principal (P)</th>
                            <th>Interest (I)</th>
                            <th>Prepayment</th>
                            <th>Total Payment</th>
                            <th>EMI (Base)</th>
                            <th>Outstanding Balance</th>
                        </tr>
                    </thead>
                    <tbody id="amortizationTableBody">
                        </tbody>
                </table>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>
